<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.14.0" xml:lang="en-US">
  <compounddef id="sysmem_8c" kind="file" language="C++">
    <compoundname>sysmem.c</compoundname>
    <includes local="no">errno.h</includes>
    <includes local="no">stdint.h</includes>
    <incdepgraph>
      <node id="1">
        <label>common/Src/sysmem.c</label>
        <link refid="sysmem_8c"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="3" relation="include">
        </childnode>
      </node>
      <node id="2">
        <label>errno.h</label>
      </node>
      <node id="3">
        <label>stdint.h</label>
      </node>
    </incdepgraph>
    <sectiondef kind="var">
      <memberdef kind="variable" id="sysmem_8c_1a2cf862d604e9c7cfcf0528a0f539a6a5" prot="public" static="yes" mutable="no">
        <type>uint8_t *</type>
        <definition>uint8_t* __sbrk_heap_end</definition>
        <argsstring></argsstring>
        <name>__sbrk_heap_end</name>
        <initializer>= NULL</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Pointer to the current high watermark of the heap usage </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="common/Src/sysmem.c" line="30" column="16" bodyfile="common/Src/sysmem.c" bodystart="30" bodyend="-1"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="func">
      <memberdef kind="function" id="sysmem_8c_1a68125648bcce70b6bb3aa0be50e99700" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void *</type>
        <definition>void * _sbrk</definition>
        <argsstring>(ptrdiff_t incr)</argsstring>
        <name>_sbrk</name>
        <param>
          <type>ptrdiff_t</type>
          <declname>incr</declname>
        </param>
        <briefdescription>
<para><ref refid="sysmem_8c_1a68125648bcce70b6bb3aa0be50e99700" kindref="member">_sbrk()</ref> allocates memory to the newlib heap and is used by malloc and others from the C library </para>
        </briefdescription>
        <detaileddescription>
<para><verbatim>* ############################################################################
* #  .data  #  .bss  #       newlib heap       #          MSP stack          #
* #         #        #                         # Reserved by _Min_Stack_Size #
* ############################################################################
* ^-- RAM start      ^-- _end                             _estack, RAM end --^
* </verbatim></para>
<para>This implementation starts allocating at the &apos;_end&apos; linker symbol The &apos;_Min_Stack_Size&apos; linker symbol reserves a memory for the MSP stack The implementation considers &apos;_estack&apos; linker symbol to be RAM end NOTE: If the MSP stack, at any point during execution, grows larger than the reserved size, please increase the &apos;_Min_Stack_Size&apos;.</para>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>incr</parametername>
</parameternamelist>
<parameterdescription>
<para>Memory size </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Pointer to allocated memory </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="common/Src/sysmem.c" line="53" column="6" bodyfile="common/Src/sysmem.c" bodystart="53" bodyend="79"/>
      </memberdef>
    </sectiondef>
    <briefdescription>
<para>System Memory calls file. </para>
    </briefdescription>
    <detaileddescription>
<para><simplesect kind="author"><para>Generated by STM32CubeMX <verbatim>       For more information about which C functions
       need which of these lowlevel functions
       please consult the newlib libc manual
</verbatim></para>
</simplesect>
<simplesect kind="attention"><para></para>
</simplesect>
Copyright (c) 2024 STMicroelectronics. All rights reserved.</para>
<para>This software is licensed under terms that can be found in the LICENSE file in the root directory of this software component. If no LICENSE file comes with this software, it is provided AS-IS. </para>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Includes<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;errno.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="25"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;stdint.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="26"><highlight class="normal"></highlight></codeline>
<codeline lineno="30"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>uint8_t<sp/>*__sbrk_heap_end<sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="31"><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<ref refid="sysmem_8c_1a68125648bcce70b6bb3aa0be50e99700" kindref="member">_sbrk</ref>(ptrdiff_t<sp/>incr)</highlight></codeline>
<codeline lineno="54"><highlight class="normal">{</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">extern</highlight><highlight class="normal"><sp/>uint8_t<sp/>_end;<sp/></highlight><highlight class="comment">/*<sp/>Symbol<sp/>defined<sp/>in<sp/>the<sp/>linker<sp/>script<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">extern</highlight><highlight class="normal"><sp/>uint8_t<sp/>_estack;<sp/></highlight><highlight class="comment">/*<sp/>Symbol<sp/>defined<sp/>in<sp/>the<sp/>linker<sp/>script<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">extern</highlight><highlight class="normal"><sp/>uint32_t<sp/>_Min_Stack_Size;<sp/></highlight><highlight class="comment">/*<sp/>Symbol<sp/>defined<sp/>in<sp/>the<sp/>linker<sp/>script<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint32_t<sp/>stack_limit<sp/>=<sp/>(uint32_t)&amp;_estack<sp/>-<sp/>(uint32_t)&amp;_Min_Stack_Size;</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/>*max_heap<sp/>=<sp/>(uint8_t<sp/>*)stack_limit;</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/>uint8_t<sp/>*prev_heap_end;</highlight></codeline>
<codeline lineno="61"><highlight class="normal"></highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Initialize<sp/>heap<sp/>end<sp/>at<sp/>first<sp/>call<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(NULL<sp/>==<sp/>__sbrk_heap_end)</highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/>__sbrk_heap_end<sp/>=<sp/>&amp;_end;</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="67"><highlight class="normal"></highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Protect<sp/>heap<sp/>from<sp/>growing<sp/>into<sp/>the<sp/>reserved<sp/>MSP<sp/>stack<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(__sbrk_heap_end<sp/>+<sp/>incr<sp/>&gt;<sp/>max_heap)</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/>errno<sp/>=<sp/>ENOMEM;</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*)-1;</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="74"><highlight class="normal"></highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/>prev_heap_end<sp/>=<sp/>__sbrk_heap_end;</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/>__sbrk_heap_end<sp/>+=<sp/>incr;</highlight></codeline>
<codeline lineno="77"><highlight class="normal"></highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*)prev_heap_end;</highlight></codeline>
<codeline lineno="79"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="common/Src/sysmem.c"/>
  </compounddef>
</doxygen>
