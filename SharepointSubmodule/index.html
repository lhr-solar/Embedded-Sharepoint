
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Software library shared among LHRS embedded systems">
      
      
        <meta name="author" content="LHR - Solar">
      
      
      
        <link rel="prev" href="../FlashAndTheBug/">
      
      
        <link rel="next" href="../CubeMX/">
      
      
        
      
      
      <link rel="icon" href="../LHRs.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Adding Embedded Sharepoint - Embedded Sharepoint Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#adding-sharepoint-to-your-project" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Embedded Sharepoint Documentation" class="md-header__button md-logo" aria-label="Embedded Sharepoint Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Embedded Sharepoint Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Adding Embedded Sharepoint
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Embedded Sharepoint Documentation" class="md-nav__button md-logo" aria-label="Embedded Sharepoint Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Embedded Sharepoint Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    README
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../FlashAndTheBug/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Flashing and Debugging
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Adding Embedded Sharepoint
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Adding Embedded Sharepoint
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-suggested-directories" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Suggested directories
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-add-embedded-sharepoint-as-a-submodule" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Add Embedded-Sharepoint as a Submodule
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-writing-a-makefile-for-your-project" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Writing a makefile for your project
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Writing a makefile for your project">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-makefile-syntax" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Makefile syntax
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Basic Makefile syntax">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comments" class="md-nav__link">
    <span class="md-ellipsis">
      
        Comments
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conditional-assignments" class="md-nav__link">
    <span class="md-ellipsis">
      
        Conditional Assignments (?=)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-expansion" class="md-nav__link">
    <span class="md-ellipsis">
      
        Variable Expansion
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wildcards" class="md-nav__link">
    <span class="md-ellipsis">
      
        Wildcards
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set-project-variables" class="md-nav__link">
    <span class="md-ellipsis">
      
        Set Project Variables
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-a-test-folder" class="md-nav__link">
    <span class="md-ellipsis">
      
        Creating a test folder
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#copy-the-gitignore" class="md-nav__link">
    <span class="md-ellipsis">
      
        Copy the .gitignore
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-add-necessary-functions" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Add necessary functions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Add necessary functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-a-mainc" class="md-nav__link">
    <span class="md-ellipsis">
      
        Create a main.c
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-systemclock_config" class="md-nav__link">
    <span class="md-ellipsis">
      
        Define SystemClock_Config
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-compiling-your-repository" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Compiling your repository
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-create-a-readme" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. Create a README
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples-of-projects-that-use-embedded-sharepoint" class="md-nav__link">
    <span class="md-ellipsis">
      
        Examples of projects that use Embedded Sharepoint
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../CubeMX/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CubeMX
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../STM32_Ports/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    STM32 Ports
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    CAN Messages
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    CAN Messages
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dbcEditor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Editing DBC Files
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DBC/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Signals & Messages
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Drivers Documentation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Drivers Documentation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../EMC2305/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    EMC2305 Usage Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Drivers/EMC2305_8h/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    EMC2305
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Drivers/SevenSegment_8h/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SevenSegment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Drivers/printf_8h/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    printf
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    BSP Documentation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    BSP Documentation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../BSP/ADC_8h/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADC
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../BSP/CAN_8h/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CAN
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../BSP/UART_8h/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UART
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-suggested-directories" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Suggested directories
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-add-embedded-sharepoint-as-a-submodule" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Add Embedded-Sharepoint as a Submodule
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-writing-a-makefile-for-your-project" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Writing a makefile for your project
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Writing a makefile for your project">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-makefile-syntax" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Makefile syntax
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Basic Makefile syntax">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comments" class="md-nav__link">
    <span class="md-ellipsis">
      
        Comments
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conditional-assignments" class="md-nav__link">
    <span class="md-ellipsis">
      
        Conditional Assignments (?=)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-expansion" class="md-nav__link">
    <span class="md-ellipsis">
      
        Variable Expansion
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wildcards" class="md-nav__link">
    <span class="md-ellipsis">
      
        Wildcards
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set-project-variables" class="md-nav__link">
    <span class="md-ellipsis">
      
        Set Project Variables
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-a-test-folder" class="md-nav__link">
    <span class="md-ellipsis">
      
        Creating a test folder
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#copy-the-gitignore" class="md-nav__link">
    <span class="md-ellipsis">
      
        Copy the .gitignore
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-add-necessary-functions" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Add necessary functions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Add necessary functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-a-mainc" class="md-nav__link">
    <span class="md-ellipsis">
      
        Create a main.c
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-systemclock_config" class="md-nav__link">
    <span class="md-ellipsis">
      
        Define SystemClock_Config
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-compiling-your-repository" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Compiling your repository
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-create-a-readme" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. Create a README
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples-of-projects-that-use-embedded-sharepoint" class="md-nav__link">
    <span class="md-ellipsis">
      
        Examples of projects that use Embedded Sharepoint
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="adding-sharepoint-to-your-project">Adding Sharepoint To Your Project</h1>
<h2 id="1-suggested-directories">1. Suggested directories</h2>
<p>It is good practice to organize files into folders based on their abstraction from the STM32 hardware. Embedded-Sharepoint contains a folder for the STM32 HAL (Hardware Abstraction Library), which holds low-level calls to the STM32. Above this are drivers that interact with the HAL, and then applications that use the drivers. This application layer is where your RTOS tasks typically run. You should also have a <code>tests/</code> directory. If your repository contains more than just firmware, it's recommended to create a <code>firmware/</code> directory for all your code, including Embedded-Sharepoint.</p>
<p>The suggested (minimal) structure is as follows:</p>
<pre><code class="language-text">Firmware/
├── Embedded-Sharepoint/  #  Don't create this folder manually, it'll be created in the next step
├── Makefile              # The makefile that you write
├── core/                 # Stores tasks and main application logic
├── drivers/              # Drivers
├── middleware/           # External libraries stored in the repository
└── tests/                # Unit and integration tests
</code></pre>
<p>These directories should all have Src/ and Inc/ folders to separate the c header and source files.</p>
<h2 id="2-add-embedded-sharepoint-as-a-submodule">2. Add Embedded-Sharepoint as a Submodule</h2>
<p>A <strong>Git submodule</strong> is a way to include one Git repository inside another. 
Embedded-Sharepoint contains common files so it should be stored as a submodule inside your repository.
For more information about submodules: <a href="https://github.blog/open-source/git/working-with-submodules/">git submodules documentation</a>.</p>
<p>Wherever you want to add Embedded-Sharepoint, run: </p>
<pre><code class="language-sh">git submodule add https://github.com/lhr-solar/Embedded-Sharepoint.git
git submodule update --init --recursive
</code></pre>
<p>Ensure that the link you're using to add this submodule is the HTTPs link and not the SSH link (needed to for automatic github workflows to trigger).</p>
<h2 id="3-writing-a-makefile-for-your-project">3. Writing a makefile for your project</h2>
<p>A <strong>Makefile</strong> is a file used to outline how you want your code to compile. There is a <a href="https://github.com/lhr-solar/Embedded-Sharepoint/blob/main/Makefile">Makefile</a> that compiles all needed files for the STM32 (our microcontroller) in the top level of the Embedded Sharepoint. You need to write another Makefile to compile your project files and call the Embedded-Sharepoint Makefile. <br />
There is a minimal template Makefile in the template/ folder in Embedded-Sharepoint. Lines with <code>#❗ CHANGE THIS ❗</code> define where you should make changes to your Makefile. Move the template Makefile to the same directory as your firmware, and rename it to just be called <code>Makefile</code>. </p>
<p>For a more in depth tutorial, I suggest visiting this article on <a href="https://makefiletutorial.com/">Makefiles</a></p>
<h3 id="basic-makefile-syntax">Basic Makefile syntax</h3>
<p>This section explains common Makefile syntax used in the template Makefile.</p>
<h4 id="comments">Comments</h4>
<p>Any line becomes a comment by adding <code>#</code> When adding comments, it's suggested to make them on a separate line from actual Makefile code, i.e avoid</p>
<pre><code class="language-make">PROJECT_TARGET ?= stm32g473xx # this line contains the project target
</code></pre>
<p>and instead do</p>
<pre><code class="language-make"># this line contaisn the project target
PROJECT_TARGET ?= stm32g473xx 
</code></pre>
<p>This is because Makefiles can sometimes compile the comments into the command and break directories. </p>
<h4 id="conditional-assignments">Conditional Assignments (<code>?=</code>)</h4>
<p>The <code>?=</code> operator assigns a value <strong>only if the variable is not already set</strong>.<br />
This allows variables to be overridden from the command line.</p>
<pre><code class="language-make">PROJECT_TARGET ?= stm32g473xx
</code></pre>
<p>This by default sets the <code>PROJECT_TARGET</code> to be <code>stm32g473xx</code>, but by running</p>
<pre><code class="language-sh">make PROJECT_TARGET=stm32l432cbt
</code></pre>
<p>The <code>PROJECT_TARGET</code> will be overridden to <code>stm32l432cbt</code></p>
<h4 id="variable-expansion">Variable Expansion</h4>
<p>Variables are referenced using <code>$(VAR)</code> or <code>${VAR}</code> (both are valid).</p>
<pre><code class="language-make">$(MAKE) -C $(BUILD_MAKEFILE_DIR) all
@echo &quot;Building ${PROJECT_TARGET}&quot;
</code></pre>
<h4 id="wildcards">Wildcards</h4>
<p>Makefiles commonly store multiple files or directories as space-separated lists.</p>
<pre><code class="language-make">PROJECT_C_INCLUDES = core/Inc drivers/Inc
PROJECT_C_SOURCES  = core/Src/main.c drivers/Src/can.c
</code></pre>
<p>Instead of setting these manually, you can do a <code>wildcard</code> search and add all files that meet certain criteria.</p>
<pre><code class="language-make">PROJECT_C_SOURCES = $(wildcard */Src/*.c)
</code></pre>
<p>This looks through all immediate subdirectories for a <code>Src</code> folder and adds all <code>.c</code> files found within.</p>
<h3 id="set-project-variables">Set Project Variables</h3>
<p>Below are several variables that the Embedded-Sharepoint Makefile uses to compile your code, these variables are used in the template Makefile, and you can update them.</p>
<ul>
<li><code>PROJECT_TARGET</code>: The STM32 part number (e.g., <code>stm32f446ret</code>)</li>
<li><code>PROJECT_C_SOURCES</code>: List of your C source files</li>
<li><code>PROJECT_C_INCLUDES</code>: List of your include directories</li>
<li><code>PROJECT_BUILD_DIR</code>: Where to place build outputs</li>
<li><code>BEAR_ENABLE</code> to make VSCode not mad at you (the red error squiggles). Bear is by default enabled, but you can set it to 0 to turn it off</li>
</ul>
<h3 id="creating-a-test-folder">Creating a test folder</h3>
<p>It's good to be able to test independent portions of your code instead of your whole code base at once. For example, if I have a driver just for controlling lights I should have a test file that just runs some code for my lights driver instead of the whole codebase which could be running a lot of things other than lights.</p>
<p>C expects a <code>main()</code> function as the starting point of your code, so the way we generally implement this is filtering out the main.c file where the <code>main()</code> function is implemented, and compiling your test file instead with it's own <code>main()</code> function.  </p>
<p>Create a <code>tests/</code> folder to store your tests, then via your Makefile you can compile those tests into your project, by default they will not be compiled. It's also good practice to add a test prefix or suffix to the name of the test file, e.g. <code>test_can.c</code> to show that it's a test file, and to avoid issues on case-insensitive filesystems like on macOS.</p>
<h3 id="copy-the-gitignore">Copy the .gitignore</h3>
<p>A lot of junk files are generated during compilation, many of those files should not be pushed so we tell git to ignore these files. A <code>.gitignore</code> file tells which files or directories to ignore, so they are not pushed to the remote repository. There is a template .gitignore file in the template/ directory, which you should place in your firmware/ directory. You are also free to add what's in the template to your already existing .gitignore file. </p>
<p>The following are files and directories you should not be pushing:</p>
<ul>
<li><code>.DS_Store</code> these are mac dump files that are generated in every directory</li>
<li><code>build/</code> this is where compiled c files are placed by default, if you change the directory in the Makefile this needs to be updated</li>
<li><code>.venv/</code> this is where python environment files are stored, and are usually user and OS dependent</li>
</ul>
<h2 id="4-add-necessary-functions">4. Add necessary functions</h2>
<h3 id="create-a-mainc">Create a main.c</h3>
<p>Your code begins from the <code>main()</code> function, and if there is no <code>main()</code> function defined the code will not compile. The <code>main()</code> function does not necessarily have to be located in a file named <code>main.c</code> but it is good practice. If you want to use any stm32 related header files, please include the <code>stm32xx_hal.h</code> header file.</p>
<h3 id="define-systemclock_config">Define SystemClock_Config</h3>
<p>The <code>SystemClock_Config</code> function configures the clock that your STM32 runs on (things like clock frequency, clock source, etc). If the clock is not setup properly then you risk unexpected behavior since a lot of low level embedded code runs using the system clock. We normally run the system clock at <strong>80mhz</strong>.</p>
<p>We define the SystemClock_Config function as "weak", which means that the function can be overridden by a different implementation of the function. We have a default implementation in the stm32xx_hal_init.c file, which by default initializes the internal oscillator of some specific Nucleo's clock, but since we operate with a variety of Nucleos and processors you should redefine the function for your specific usecase.</p>
<p>Generate a new SystemClock_Config in STM32CubeMX and add it to one of your files in your repository (suggested is your main.c). This should serve as a redefinition of the function and will override the default behavior. Make sure you are generating the code with the correct microcontroller part number in the software, and you are using an external oscillator (if generating code for one of our SOM PCBs). Instructions on how to use CubeMX and generate a SystemClock_Config can be found <a href="../CubeMX/">here</a>.</p>
<h2 id="5-compiling-your-repository">5. Compiling your repository</h2>
<p>Code compilation must be done in a nix shell, in Embedded-Sharepoint you can normally just run</p>
<pre><code class="language-sh">nix develop
</code></pre>
<p>since the <code>flake.nix</code> file is stored in that directory, but in your repository the flake.nix file is stored in a different directory. To enter the Nix shell when the <code>flake.nix</code> file is stored somewhere else, simply run:</p>
<pre><code class="language-sh">nix develop [directory to where flake.nix is]
</code></pre>
<p>For example:</p>
<pre><code class="language-sh">nix develop ./Embedded-Sharepoint
</code></pre>
<p>Once you're in the nix shell, run </p>
<pre><code class="language-sh">make
</code></pre>
<p>in the same directory as your new Makefile.</p>
<p>If you do not want to type that out everytime, you can create a bash script that runs the nix develop command and hardcodes the directory where the nix file is. See this example in <a href="https://github.com/lhr-solar/PS-VehicleControlUnit/blob/main/Firmware/run_nix.sh">VCU</a></p>
<h2 id="6-create-a-readme">6. Create a README</h2>
<p>A README.md file is very important for onboarding instructions, and to outline workflows. A README should explain how to go from cloning a repository to how to contribute code. The more descriptive the better!</p>
<h2 id="examples-of-projects-that-use-embedded-sharepoint">Examples of projects that use Embedded Sharepoint</h2>
<ul>
<li><a href="https://github.com/lhr-solar/BPS-Leader">BPS-Leader</a></li>
<li><a href="https://github.com/lhr-solar/PS-VehicleControlUnit">VCU</a></li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": [], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>